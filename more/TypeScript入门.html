<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript | 前端知识</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="欢迎访问公众号：前端周报">
    
    <link rel="preload" href="/assets/css/0.styles.b3dad54c.css" as="style"><link rel="preload" href="/assets/js/app.c54d73b3.js" as="script"><link rel="preload" href="/assets/js/2.6cdc8135.js" as="script"><link rel="preload" href="/assets/js/110.9a0a6e5b.js" as="script"><link rel="preload" href="/assets/js/4.a41c0c79.js" as="script"><link rel="prefetch" href="/assets/js/10.c02c1e21.js"><link rel="prefetch" href="/assets/js/100.8700d646.js"><link rel="prefetch" href="/assets/js/101.3a187938.js"><link rel="prefetch" href="/assets/js/102.05cbfba4.js"><link rel="prefetch" href="/assets/js/103.ce22a9d1.js"><link rel="prefetch" href="/assets/js/104.7fb5abfe.js"><link rel="prefetch" href="/assets/js/105.76f077bd.js"><link rel="prefetch" href="/assets/js/106.0aa897e9.js"><link rel="prefetch" href="/assets/js/107.762b7545.js"><link rel="prefetch" href="/assets/js/108.af4eb65b.js"><link rel="prefetch" href="/assets/js/109.a861e6aa.js"><link rel="prefetch" href="/assets/js/11.28ffe2ea.js"><link rel="prefetch" href="/assets/js/111.ff3ee859.js"><link rel="prefetch" href="/assets/js/112.79eba6d4.js"><link rel="prefetch" href="/assets/js/113.2fbc12db.js"><link rel="prefetch" href="/assets/js/114.8b7d68cd.js"><link rel="prefetch" href="/assets/js/115.5ea81830.js"><link rel="prefetch" href="/assets/js/116.40b46845.js"><link rel="prefetch" href="/assets/js/117.8c956aef.js"><link rel="prefetch" href="/assets/js/118.598a09ff.js"><link rel="prefetch" href="/assets/js/119.57cda7c9.js"><link rel="prefetch" href="/assets/js/12.17171ff9.js"><link rel="prefetch" href="/assets/js/120.baa8b724.js"><link rel="prefetch" href="/assets/js/121.b21708fa.js"><link rel="prefetch" href="/assets/js/122.d86a560f.js"><link rel="prefetch" href="/assets/js/123.326dcef8.js"><link rel="prefetch" href="/assets/js/124.be8155c5.js"><link rel="prefetch" href="/assets/js/125.038837fb.js"><link rel="prefetch" href="/assets/js/126.82810062.js"><link rel="prefetch" href="/assets/js/127.cdf23cc3.js"><link rel="prefetch" href="/assets/js/128.3921536c.js"><link rel="prefetch" href="/assets/js/129.fe16c1d8.js"><link rel="prefetch" href="/assets/js/13.92e69144.js"><link rel="prefetch" href="/assets/js/130.a8b1661f.js"><link rel="prefetch" href="/assets/js/131.12b5f184.js"><link rel="prefetch" href="/assets/js/132.cf3721df.js"><link rel="prefetch" href="/assets/js/133.6ac5a394.js"><link rel="prefetch" href="/assets/js/134.e3c0ab63.js"><link rel="prefetch" href="/assets/js/135.c852878d.js"><link rel="prefetch" href="/assets/js/136.637439b3.js"><link rel="prefetch" href="/assets/js/137.c529cb4d.js"><link rel="prefetch" href="/assets/js/138.1bcf2e99.js"><link rel="prefetch" href="/assets/js/14.1ad2cb2c.js"><link rel="prefetch" href="/assets/js/15.04d83116.js"><link rel="prefetch" href="/assets/js/16.509bd9b7.js"><link rel="prefetch" href="/assets/js/17.36a6c880.js"><link rel="prefetch" href="/assets/js/18.7504f2f2.js"><link rel="prefetch" href="/assets/js/19.adcade81.js"><link rel="prefetch" href="/assets/js/20.a48cc099.js"><link rel="prefetch" href="/assets/js/21.e08d4a66.js"><link rel="prefetch" href="/assets/js/22.e15443d8.js"><link rel="prefetch" href="/assets/js/23.d1e92eb1.js"><link rel="prefetch" href="/assets/js/24.34b53952.js"><link rel="prefetch" href="/assets/js/25.d41b9dd6.js"><link rel="prefetch" href="/assets/js/26.04879470.js"><link rel="prefetch" href="/assets/js/27.f36afdbf.js"><link rel="prefetch" href="/assets/js/28.60564414.js"><link rel="prefetch" href="/assets/js/29.f2d76d07.js"><link rel="prefetch" href="/assets/js/3.08666eba.js"><link rel="prefetch" href="/assets/js/30.58237659.js"><link rel="prefetch" href="/assets/js/31.ca6fa0ba.js"><link rel="prefetch" href="/assets/js/32.690853b8.js"><link rel="prefetch" href="/assets/js/33.78101815.js"><link rel="prefetch" href="/assets/js/34.a03db625.js"><link rel="prefetch" href="/assets/js/35.351fcf38.js"><link rel="prefetch" href="/assets/js/36.ef6ff735.js"><link rel="prefetch" href="/assets/js/37.a5b5e000.js"><link rel="prefetch" href="/assets/js/38.833005a4.js"><link rel="prefetch" href="/assets/js/39.35650724.js"><link rel="prefetch" href="/assets/js/40.36336ee6.js"><link rel="prefetch" href="/assets/js/41.8ab71818.js"><link rel="prefetch" href="/assets/js/42.bb097faf.js"><link rel="prefetch" href="/assets/js/43.61e77c0c.js"><link rel="prefetch" href="/assets/js/44.0b4457ca.js"><link rel="prefetch" href="/assets/js/45.aac3b481.js"><link rel="prefetch" href="/assets/js/46.a508044f.js"><link rel="prefetch" href="/assets/js/47.ce917a93.js"><link rel="prefetch" href="/assets/js/48.c714bc1d.js"><link rel="prefetch" href="/assets/js/49.92804c9b.js"><link rel="prefetch" href="/assets/js/5.30a0b667.js"><link rel="prefetch" href="/assets/js/50.87b3809b.js"><link rel="prefetch" href="/assets/js/51.b27ce3cc.js"><link rel="prefetch" href="/assets/js/52.477f8fb5.js"><link rel="prefetch" href="/assets/js/53.4bda0434.js"><link rel="prefetch" href="/assets/js/54.525de579.js"><link rel="prefetch" href="/assets/js/55.ef8e0bfb.js"><link rel="prefetch" href="/assets/js/56.3962c9c3.js"><link rel="prefetch" href="/assets/js/57.d6f42c28.js"><link rel="prefetch" href="/assets/js/58.8fea3227.js"><link rel="prefetch" href="/assets/js/59.bd7b25f7.js"><link rel="prefetch" href="/assets/js/6.3025ef15.js"><link rel="prefetch" href="/assets/js/60.05d4b4ea.js"><link rel="prefetch" href="/assets/js/61.831da8d5.js"><link rel="prefetch" href="/assets/js/62.7fceeeb1.js"><link rel="prefetch" href="/assets/js/63.6f46075f.js"><link rel="prefetch" href="/assets/js/64.1d89c818.js"><link rel="prefetch" href="/assets/js/65.ec965501.js"><link rel="prefetch" href="/assets/js/66.893ec329.js"><link rel="prefetch" href="/assets/js/67.4d00e228.js"><link rel="prefetch" href="/assets/js/68.9f06b6a2.js"><link rel="prefetch" href="/assets/js/69.07e70ec7.js"><link rel="prefetch" href="/assets/js/7.c16c90e5.js"><link rel="prefetch" href="/assets/js/70.5e312c5b.js"><link rel="prefetch" href="/assets/js/71.9c68dd0b.js"><link rel="prefetch" href="/assets/js/72.99f53b1e.js"><link rel="prefetch" href="/assets/js/73.a98aebf5.js"><link rel="prefetch" href="/assets/js/74.55ccc92d.js"><link rel="prefetch" href="/assets/js/75.8fbad63a.js"><link rel="prefetch" href="/assets/js/76.22115303.js"><link rel="prefetch" href="/assets/js/77.89a66502.js"><link rel="prefetch" href="/assets/js/78.585e01c4.js"><link rel="prefetch" href="/assets/js/79.cef89b61.js"><link rel="prefetch" href="/assets/js/8.20975b36.js"><link rel="prefetch" href="/assets/js/80.40e152a5.js"><link rel="prefetch" href="/assets/js/81.7bd4f3fa.js"><link rel="prefetch" href="/assets/js/82.06872893.js"><link rel="prefetch" href="/assets/js/83.b70b99a6.js"><link rel="prefetch" href="/assets/js/84.fd372a96.js"><link rel="prefetch" href="/assets/js/85.1837c29b.js"><link rel="prefetch" href="/assets/js/86.295ae7b1.js"><link rel="prefetch" href="/assets/js/87.c4287e41.js"><link rel="prefetch" href="/assets/js/88.1850155b.js"><link rel="prefetch" href="/assets/js/89.e2a7834d.js"><link rel="prefetch" href="/assets/js/9.2ee6a774.js"><link rel="prefetch" href="/assets/js/90.3b4154d1.js"><link rel="prefetch" href="/assets/js/91.25b76255.js"><link rel="prefetch" href="/assets/js/92.bb5707b2.js"><link rel="prefetch" href="/assets/js/93.918cc5ea.js"><link rel="prefetch" href="/assets/js/94.3f688cce.js"><link rel="prefetch" href="/assets/js/95.e8066710.js"><link rel="prefetch" href="/assets/js/96.d49e2a71.js"><link rel="prefetch" href="/assets/js/97.965ac2e0.js"><link rel="prefetch" href="/assets/js/98.05924f51.js"><link rel="prefetch" href="/assets/js/99.24466c79.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b3dad54c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端知识</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/base/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/more/" class="nav-link router-link-active">
  进阶
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  原创
</a></div><div class="nav-item"><a href="/mdn/" class="nav-link">
  MDN
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">
  力扣
</a></div> <a href="https://github.com/maxlxq/maxlxq.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/base/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/more/" class="nav-link router-link-active">
  进阶
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  原创
</a></div><div class="nav-item"><a href="/mdn/" class="nav-link">
  MDN
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">
  力扣
</a></div> <a href="https://github.com/maxlxq/maxlxq.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/more/设计模式.html" class="sidebar-link">设计模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DevOps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/more/Git使用.html" class="sidebar-link">Git 使用</a></li><li><a href="/more/GitHub-Actions实践.html" class="sidebar-link">GitHub-Actions 实践</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/more/Fiber详解.html" class="sidebar-link">Fiber 详解</a></li><li><a href="/more/React源码分析.html" class="sidebar-link">React 解读</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器网络相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/more/HTTP发展.html" class="sidebar-link">HTTP 发展</a></li><li><a href="/more/HTTP协议.html" class="sidebar-link">HTTP协议</a></li><li><a href="/more/三次握手和四次挥手.html" class="sidebar-link">三次握手和四次挥手</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ECMAScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/more/ECMAScript.html" class="sidebar-link">ECMAScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/more/TypeScript入门.html" class="active sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#选择-typescript-的原因" class="sidebar-link">选择 TypeScript 的原因</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#typescript-与-javascript-有何不同" class="sidebar-link">TypeScript 与 JavaScript 有何不同</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#简单基础类型" class="sidebar-link">简单基础类型</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#复杂基础类型" class="sidebar-link">复杂基础类型</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#什么是字面量类型、类型推断、类型拓宽和类型缩小" class="sidebar-link">什么是字面量类型、类型推断、类型拓宽和类型缩小</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#函数类型-返回值类型和参数类型到底如何定义" class="sidebar-link">函数类型：返回值类型和参数类型到底如何定义</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#类类型" class="sidebar-link">类类型</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#接口类型与类型别名" class="sidebar-link">接口类型与类型别名</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#高级类型-联合类型和交叉类型" class="sidebar-link">高级类型：联合类型和交叉类型</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#枚举类型-7种用法" class="sidebar-link">枚举类型: 7种用法</a></li><li class="sidebar-sub-header"><a href="/more/TypeScript入门.html#泛型-如何正确使用泛型约束类型变量" class="sidebar-link">泛型：如何正确使用泛型约束类型变量</a></li></ul></li><li><a href="/more/TypeScript进阶.html" class="sidebar-link">TypeScript进阶</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript"><a href="#typescript" class="header-anchor">#</a> TypeScript</h1> <h2 id="选择-typescript-的原因"><a href="#选择-typescript-的原因" class="header-anchor">#</a> 选择 TypeScript 的原因</h2> <h3 id="typescript-的本质"><a href="#typescript-的本质" class="header-anchor">#</a> TypeScript 的本质</h3> <p>TypeScript 是 JavaScript 的超集，可以理解为 添加了类型注解的 JavaScript，本质上与 JavaScript 并无区别。</p> <h3 id="typescript-的可靠性"><a href="#typescript-的可靠性" class="header-anchor">#</a> TypeScript 的可靠性</h3> <p>TypeScript 的静态类型检查，让部分 JavaScript 错误（主要是一些低级错误）能在开发阶段就能被发现并解决。</p> <p>当 TypeScript 类型检测能力覆盖到整个项目代码后，任意破坏约定的改动都能被自动检测出来，并提出类型错误。<br>
因此，可以放心地修改、重构业务逻辑，而不用过分担忧因为考虑不周而犯下低级错误。</p> <h3 id="面向接口编程"><a href="#面向接口编程" class="header-anchor">#</a> 面向接口编程</h3> <p>编写 TypeScript 类型注解，本质上就是接口设计。<br>
TypeScript 极大可能改变你的思维方式，从而逐渐养成一个好习惯。</p> <p>编写具体的逻辑之前，我们需要设计好数据结构、编写类型注解，并按照接口约定实现业务逻辑。</p> <p>同时，了解了接口约定的重要性，也会约束自己或他人设计接口、编写注解、遵守约定。</p> <h3 id="typescript-正成为主流"><a href="#typescript-正成为主流" class="header-anchor">#</a> TypeScript 正成为主流</h3> <p>相对于 Flow 而言，TypeScript 更具备类型编程的优势。越来越多的框架选择使用 TypeScript 编写源码，亦或是为 TypeScript 提供了完美支持。</p> <h1 id="typescript-入门"><a href="#typescript-入门" class="header-anchor">#</a> TypeScript 入门</h1> <p>全局安装 typescript</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> global <span class="token function">add</span> typescript
<span class="token function">yarn</span> global <span class="token function">add</span> ts-node

<span class="token comment"># or</span>
<span class="token function">npm</span> i -g typescript
<span class="token function">npm</span> i -g ts-node

<span class="token comment"># 查看版本</span>
tsc -v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="typescript-与-javascript-有何不同"><a href="#typescript-与-javascript-有何不同" class="header-anchor">#</a> TypeScript 与 JavaScript 有何不同</h2> <p>TypeScript 是类型化的 JavaScript，支持 JavaScript 的所有特性，还添加了静态类型注解扩展。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// number 表示数字类型，: 用来分割变量和类型的分隔符</span>
<span class="token keyword">let</span> num<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="简单基础类型"><a href="#简单基础类型" class="header-anchor">#</a> 简单基础类型</h2> <p>number 也可以换为其他类型，如 JavaScript 的原始类型：number、string、boolean、null、undefined、symbol 等。</p> <p>当右值类型与左侧类型不一致时，同步进行的静态类型检测就会提示这里有问题。</p> <h2 id="复杂基础类型"><a href="#复杂基础类型" class="header-anchor">#</a> 复杂基础类型</h2> <h3 id="数组类型"><a href="#数组类型" class="header-anchor">#</a> 数组类型</h3> <p>可以直接使用 [] 的形式定义数组类型</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> arrayOfNumber<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> arrayOfString<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也可以使用 Array 泛型定义数组类型</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> arrayOfNumber<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> arrayOfString<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>两者本质上没有区别，更推荐使用 [] 写法。可以避免与 JSX 的语法冲突，也能减少代码量。</p> <h3 id="特殊类型"><a href="#特殊类型" class="header-anchor">#</a> 特殊类型</h3> <ul><li>any</li></ul> <p>any 指的是一个任意类型。TypeScript 会选择性地忽略静态类型检测。</p> <p>将一个基于 JavaScript 的应用改造成 TypeScript 的过程中，可以借助 any 来选择性添加、删除某些模块的检测，直至逐步替换掉所有的 JavaScript。</p> <ul><li>unknown</li></ul> <p>unknown 描述类型并不确定的变量。</p> <ul><li>void</li></ul> <p>void 仅适用于表示没有返回值的函数</p> <ul><li>undefined</li></ul> <p>undefined 表示一个可缺省、未定义的属性。</p> <ul><li>null</li></ul> <p>null 表明对象或属性可能是空值。</p> <ul><li>never</li></ul> <p>never 表示永远不会返回值的类型。<br>
never 是所有类型的子类型。</p> <ul><li>object</li></ul> <p>object 类型表示非原始类型的类型。</p> <h2 id="什么是字面量类型、类型推断、类型拓宽和类型缩小"><a href="#什么是字面量类型、类型推断、类型拓宽和类型缩小" class="header-anchor">#</a> 什么是字面量类型、类型推断、类型拓宽和类型缩小</h2> <h3 id="类型推断"><a href="#类型推断" class="header-anchor">#</a> 类型推断</h3> <p>在 TypeScript 中，类型标注声明是在变量之后。</p> <p>使用类型标注后置的好处是编译器可以通过代码所在的上下文推导其对应的类型，无需再声明变量类型。</p> <h3 id="上下文推断"><a href="#上下文推断" class="header-anchor">#</a> 上下文推断</h3> <p>变量的类型可以通过被赋值的值进行推断。在某些特定情况下，也可以通过变量所在的上下文环境推断变量的类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token punctuation">{</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'this is string'</span> <span class="token comment">// str: string</span>
  <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// num: number</span>
  <span class="token keyword">let</span> bool <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// bool: boolean</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span>
  <span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'this is string'</span> <span class="token comment">// str: 'this is string'</span>
  <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// num: 1</span>
  <span class="token keyword">const</span> bool <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// bool: true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="字面量类型"><a href="#字面量类型" class="header-anchor">#</a> 字面量类型</h3> <p>字面量不仅可以表示值，还可以表示类型，即字面量类型。</p> <p>TypeScript 支持 3 种字面量类型：字符串、数字、布尔。对应的字面量分别拥有与其值一样的字面量类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token punctuation">{</span>
  <span class="token keyword">let</span> specifiedStr<span class="token operator">:</span> <span class="token string">'this is string'</span> <span class="token operator">=</span> <span class="token string">'this is string'</span>
  <span class="token keyword">let</span> str<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'any string'</span>
  specifiedStr <span class="token operator">=</span> str <span class="token comment">// ts(2322) 类型 '&quot;string&quot;' 不能赋值给类型 'this is string'</span>
  str <span class="token operator">=</span> specifiedStr <span class="token comment">// ok</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="字符串字面量类型"><a href="#字符串字面量类型" class="header-anchor">#</a> 字符串字面量类型</h3> <p>单个字面量类型并没有太大的用处，将多个字面量类型组合成一个联合类型，用来描述拥有明确成员的使用的集合。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Direction</span> <span class="token operator">=</span> <span class="token string">'up'</span> <span class="token operator">|</span> <span class="token string">'down'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>相较于 string 类型，使用字面量类型（组合的联合类型）可以将变量限定为更具体的类型。</p> <h3 id="数字字面量类型及布尔字面量类型"><a href="#数字字面量类型及布尔字面量类型" class="header-anchor">#</a> 数字字面量类型及布尔字面量类型</h3> <p>与字符串字面量类型类似，举个例子</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Config</span> <span class="token punctuation">{</span>
    size<span class="token operator">:</span> <span class="token string">'small'</span> <span class="token operator">|</span> <span class="token string">'big'</span>
    isEnable<span class="token operator">:</span>  <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
    margin<span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">4</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>再看通过 let 和 const 定义的变量的值相同，而变量类型不一致的具体原因。</p> <p>const 定义为一个不可变更的常量，在缺省类型注解的情况下，TypeScript 推断出它的类型直接由赋值字面量的类型决定。</p> <p>let 定义的变量，在缺省类型注解时，会转换为赋值字面量类型的父类型。<br>
这种将字面量子类型转换为父类型的设计称之为&quot;literal widening&quot;，也就是字面量类型的拓宽。</p> <h3 id="literal-widening"><a href="#literal-widening" class="header-anchor">#</a> Literal Widening</h3> <p>所有通过 let 或 var 定义的变量、函数的形参、对象的非只读属性，如果满足制定了初始值且未显示添加类型注解的条件，那么推断出来的类型就是指定的初始值字面量类型拓宽之后的类型。<br>
这就是字面量类型拓宽。</p> <h3 id="type-widening"><a href="#type-widening" class="header-anchor">#</a> Type Widening</h3> <p>对 null、undefined 类型进行拓宽，通过 let、var 定义的变量如果满足未显示声明类型注解且被赋予了 null 或 undefined 值，则推断出这些变量的类型是 any</p> <h3 id="type-narrowing"><a href="#type-narrowing" class="header-anchor">#</a> Type Narrowing</h3> <p>类型缩小。使用类型守卫将函数参数的类型从 any 缩小到明确的类型。</p> <h2 id="函数类型-返回值类型和参数类型到底如何定义"><a href="#函数类型-返回值类型和参数类型到底如何定义" class="header-anchor">#</a> 函数类型：返回值类型和参数类型到底如何定义</h2> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="返回值类型"><a href="#返回值类型" class="header-anchor">#</a> 返回值类型</h3> <p>函数如果没有返回值，则使用 void 类型表示。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以使用类似定义箭头函数的语法来表示函数类型的参数和返回值类型，此时 <code>=&gt;</code> 仅仅用来定义一个函数类型而不用实现这个函数。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Adder</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token keyword">const</span> add<span class="token operator">:</span> <span class="token function-variable function">Adder</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="参数类型"><a href="#参数类型" class="header-anchor">#</a> 参数类型</h3> <h4 id="可选参数和默认参数"><a href="#可选参数和默认参数" class="header-anchor">#</a> 可选参数和默认参数</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span>x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x
<span class="token punctuation">}</span>

<span class="token comment">// 使用可选参数的函数与使用了联合类型的函数不等价</span>
<span class="token keyword">function</span> <span class="token function">log1</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x
<span class="token punctuation">}</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ts(2554) Expected 1 arguments, bug got 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>可选参数表示可以缺省、可以不传，但使用了联合类型的函数不可缺省，必须是特定类型或 undefined。</p> <p>默认参数必须是参数类型的子类型。</p> <h4 id="剩余参数"><a href="#剩余参数" class="header-anchor">#</a> 剩余参数</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token operator">...</span>nums<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> nums<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> pre <span class="token operator">+</span> cur<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用联合类型兼容 string</span>
<span class="token keyword">function</span> <span class="token function">sum2</span><span class="token punctuation">(</span><span class="token operator">...</span>nums<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> nums<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">reduce</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> pre <span class="token operator">+</span> <span class="token function">Number</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">sum2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="this"><a href="#this" class="header-anchor">#</a> this</h3> <p>TypeScript 在严格模式下，必须指定 this 的类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> Person<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="函数重载"><a href="#函数重载" class="header-anchor">#</a> 函数重载</h3> <p>TypeScript 中同一个函数可以根据不同类型的参数与返回值，实现函数的多态。</p> <h3 id="类型谓词-is"><a href="#类型谓词-is" class="header-anchor">#</a> 类型谓词 is</h3> <p>应用场景：实现自定义类型守卫</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">:</span> s <span class="token keyword">is</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> s <span class="token operator">===</span> <span class="token string">'string'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">isNumber</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> n <span class="token operator">===</span> <span class="token string">'number'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">operator</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// x 类型缩小为 string</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNumber</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ts(2345) unkonwn 不能赋值给 number</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="类类型"><a href="#类类型" class="header-anchor">#</a> 类类型</h2> <h3 id="类"><a href="#类" class="header-anchor">#</a> 类</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>

  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof! Woof!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'Q'</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; 'Woof! Woof!'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="接口类型与类型别名"><a href="#接口类型与类型别名" class="header-anchor">#</a> 接口类型与类型别名</h2> <h3 id="interface-接口类型"><a href="#interface-接口类型" class="header-anchor">#</a> interface 接口类型</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/** 关键字 接口名称 */</span>
<span class="token keyword">interface</span> <span class="token class-name">ProgramLanguage</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 语言名称 */</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 使用年限 */</span>
  <span class="token function-variable function">age</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> TypeScript<span class="token operator">:</span> ProgramLanguage

TypeScript <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">age</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2012</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>可缺省属性</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/** 关键字 接口名称 */</span>
<span class="token keyword">interface</span> <span class="token class-name">OptionalProgramLanguage</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 语言名称 */</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 使用年限 */</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> OptionalTypeScript<span class="token operator">:</span> OptionalProgramLanguage <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'TypeScript'</span>
<span class="token punctuation">}</span> <span class="token comment">// ok</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>只读属性</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ReadOnlyProgramLanguage</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> ReadOnlyTypeScript<span class="token operator">:</span> ReadOnlyProgramLanguage <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

ReadOnlyTypeScript<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'JavaScript'</span> <span class="token comment">// ts(2540)错误，name 只读</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这是静态类型层面的只读，实际上并不能阻止对对象的篡改。转译为 JavaScript 之后，readonly 修饰符会被抹除。</p> <ul><li>定义函数类型</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/** 关键字 接口名称 */</span>
<span class="token keyword">interface</span> <span class="token class-name">ProgramLanguage</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 语言名称 */</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 使用年限 */</span>
  <span class="token function-variable function">age</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// 接口类型</span>
<span class="token keyword">interface</span> <span class="token class-name">StudyLanguage</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>language<span class="token operator">:</span> ProgramLanguage<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> StudyInterface<span class="token operator">:</span> <span class="token function-variable function">StudyLanguage</span> <span class="token operator">=</span> language <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

<span class="token comment">/** 一般使用 内联类型或类型别名，配合箭头函数语法来定义函数类型 */</span>
<span class="token keyword">type</span> <span class="token class-name">StudyLanguageType</span> <span class="token operator">=</span> <span class="token punctuation">(</span>language<span class="token operator">:</span> ProgramLanguage<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>索引签名</li></ul> <p>索引名称的类型分为 string 和 number 两种。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">LanguageRankInterface</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>rank<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">LanguageYearInterface</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> LanguageRankMap<span class="token operator">:</span> LanguageRankInterface <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'TypeScript'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'JavaScript'</span><span class="token punctuation">,</span>
  <span class="token string">'WrongIndex'</span><span class="token operator">:</span> <span class="token string">'2012'</span><span class="token punctuation">,</span> <span class="token comment">// ts(2322) 不存在的属性名</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> LanguageMap<span class="token operator">:</span> LanguageYearInterface <span class="token operator">=</span> <span class="token punctuation">{</span>
  TypeScript<span class="token operator">:</span> <span class="token number">2012</span><span class="token punctuation">,</span>
  JavaScript<span class="token operator">:</span> <span class="token number">1995</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token number">1970</span><span class="token punctuation">,</span> <span class="token comment">// 数字作为索引时，可以兼容数字，也可以兼容字符串</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>继承与实现</li></ul> <p>接口类型可以继承与被继承</p> <ol><li>使用 extends 关键字</li></ol> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/** 关键字 接口名称 */</span>
<span class="token keyword">interface</span> <span class="token class-name">ProgramLanguage</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 语言名称 */</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** 使用年限 */</span>
  <span class="token function-variable function">age</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">DynamicLanguage</span> <span class="token keyword">extends</span> <span class="token class-name">ProgramLanguage</span> <span class="token punctuation">{</span>
  rank<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 定义新属性</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">TypeSafeLanguage</span> <span class="token keyword">extends</span> <span class="token class-name">ProgramLanguage</span> <span class="token punctuation">{</span>
  typeChecker<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 定义新属性</span>
<span class="token punctuation">}</span>

<span class="token comment">// 继承多个</span>
<span class="token keyword">interface</span> <span class="token class-name">TypeScriptLanguage</span> <span class="token keyword">extends</span> <span class="token class-name">DynamicLanguage</span><span class="token punctuation">,</span> TypeSafeLanguage <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'TypeScript'</span> <span class="token comment">// 用原属性类型的兼容的类型(子集)重新定义属性</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>Type 类型别名</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LanguageType</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function-variable function">age</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>interface 与 Type 的区别</li></ul> <p>interface 接口类型重复定义，属性会累加</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Language</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Language</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> lang<span class="token operator">:</span> Language <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>类型别名 不能重复定义</p> <h2 id="高级类型-联合类型和交叉类型"><a href="#高级类型-联合类型和交叉类型" class="header-anchor">#</a> 高级类型：联合类型和交叉类型</h2> <h3 id="联合类型"><a href="#联合类型" class="header-anchor">#</a> 联合类型</h3> <p>Unions 联合类型 表示变量、参数的类型不是单一原子类型，可能是多种不用的类型的组合。</p> <p>表示方法：通过<code>|</code>操作符分隔类型的语法</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">formatPX</span><span class="token punctuation">(</span>size<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> size <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> size <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> 仅支持 number 或者 string</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">formatPX</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
<span class="token function">formatPX</span><span class="token punctuation">(</span><span class="token string">'13px'</span><span class="token punctuation">)</span>
<span class="token function">formatPX</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// ts(2345) 'true' 类型不能赋予 'number | string' 类型</span>
<span class="token function">formatPX</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// ts(2345) 'true' 类型不能赋予 'number | string' 类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span>
  <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Fish</span> <span class="token punctuation">{</span>
  <span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">getPet</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Bird <span class="token operator">|</span> <span class="token function-variable function">Fish</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
   <span class="token comment">// ...</span>
  <span class="token punctuation">}</span> <span class="token keyword">as</span> Bird <span class="token operator">|</span> Fish
<span class="token punctuation">}</span>
<span class="token keyword">const</span> Pet <span class="token operator">=</span> <span class="token function">getPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Pet<span class="token punctuation">.</span><span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ok</span>
Pet<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ts(2339) 'Fish' 没有 'fly' 属性 'Bird | Fish' 没有 'fly' 属性</span>

<span class="token comment">// 类型守卫</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'fly'</span> <span class="token keyword">in</span> Pet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Pet<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ok</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="交叉类型"><a href="#交叉类型" class="header-anchor">#</a> 交叉类型</h3> <p><code>&amp;</code> 表示交叉类型</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Useless</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">&amp;</span> <span class="token builtin">number</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="合并接口类型"><a href="#合并接口类型" class="header-anchor">#</a> 合并接口类型</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">IntersectionType</span> <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> mixed<span class="token operator">:</span> IntersectionType <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如果合并的多个接口类型存在同名属性，那么该属性的类型为 多个属性的交叉类型</p> <h3 id="合并联合类型"><a href="#合并联合类型" class="header-anchor">#</a> 合并联合类型</h3> <p>合并联合类型为一个交叉类型，可以理解为求交集</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnionA</span> <span class="token operator">=</span> <span class="token string">'px'</span> <span class="token operator">|</span> <span class="token string">'em'</span> <span class="token operator">|</span> <span class="token string">'rem'</span> <span class="token operator">|</span> <span class="token string">'%'</span>
<span class="token keyword">type</span> <span class="token class-name">UnionB</span> <span class="token operator">=</span> <span class="token string">'vh'</span> <span class="token operator">|</span> <span class="token string">'em'</span> <span class="token operator">|</span> <span class="token string">'rem'</span> <span class="token operator">|</span> <span class="token string">'pt'</span>
<span class="token keyword">type</span> <span class="token class-name">IntersectionUnion</span> <span class="token operator">=</span> UnionA <span class="token operator">&amp;</span> UnionB
<span class="token keyword">const</span> intersectionA<span class="token operator">:</span> IntersectionUnion <span class="token operator">=</span> <span class="token string">'em'</span> <span class="token comment">// ok</span>
<span class="token keyword">const</span> intersectionB<span class="token operator">:</span> IntersectionUnion <span class="token operator">=</span> <span class="token string">'rem'</span> <span class="token comment">// ok</span>
<span class="token keyword">const</span> intersectionC<span class="token operator">:</span> IntersectionUnion <span class="token operator">=</span> <span class="token string">'px'</span> <span class="token comment">// ts(2322)</span>
<span class="token keyword">const</span> intersectionD<span class="token operator">:</span> IntersectionUnion <span class="token operator">=</span> <span class="token string">'pt'</span> <span class="token comment">// ts(2322)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如果多个联合类型中没有相同的类型成员，交叉出来的类型就是 never。</p> <h3 id="联合、交叉组合"><a href="#联合、交叉组合" class="header-anchor">#</a> 联合、交叉组合</h3> <p>联合操作符<code>|</code>的优先级低于交叉操作符<code>&amp;</code></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UnionIntersectionC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">UnionIntersectionD</span> <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 满足分配率</span>
<span class="token keyword">type</span> <span class="token class-name">UnionIntersectionE</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 满足交换律</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="类型缩减"><a href="#类型缩减" class="header-anchor">#</a> 类型缩减</h3> <p>如果将 string 原始类型和 string 字面量类型 组合成联合类型，就会类型缩减为 string。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">URStr</span> <span class="token operator">=</span> <span class="token string">'string'</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name">URNum</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name">URBoolean</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// boolean</span>
<span class="token keyword">enum</span> EnumUR <span class="token punctuation">{</span>
  <span class="token constant">ONE</span><span class="token punctuation">,</span>
  <span class="token constant">TWO</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">URE</span></span> <span class="token operator">=</span> EnumUR<span class="token punctuation">.</span><span class="token constant">ONE</span> <span class="token operator">|</span> EnumUR<span class="token punctuation">;</span> <span class="token comment">// EnumUR</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>类型缩减削弱了 IDE 自动提示的能力。需要给父类型添加 <code>&amp; {}</code>, 来控制缩减。</p> <h2 id="枚举类型-7种用法"><a href="#枚举类型-7种用法" class="header-anchor">#</a> 枚举类型: 7种用法</h2> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Day</span> <span class="token operator">=</span> <span class="token string">'SUNDAY'</span> <span class="token operator">|</span> <span class="token string">'MONDAY'</span> <span class="token operator">|</span> <span class="token string">'TUESDAY'</span> <span class="token operator">|</span> <span class="token string">'WEDNESDAY'</span> <span class="token operator">|</span> <span class="token string">'THURSDAY'</span> <span class="token operator">|</span> <span class="token string">'FRIDAY'</span> <span class="token operator">|</span> <span class="token string">'SATURDAY'</span>
<span class="token keyword">const</span> <span class="token constant">SUNDAY</span><span class="token operator">:</span> Day <span class="token operator">=</span> <span class="token string">'SUNDAY'</span>
<span class="token keyword">const</span> <span class="token constant">SATURDAY</span><span class="token operator">:</span> Day <span class="token operator">=</span> <span class="token string">'SATURDAY'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="枚举类型-enums"><a href="#枚举类型-enums" class="header-anchor">#</a> 枚举类型 Enums</h3> <p>使用 enum 关键字定义枚举类型： enum + 枚举名字 + 一对花括号。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> Day <span class="token punctuation">{</span>
  <span class="token constant">SUNDAY</span><span class="token punctuation">,</span>
  <span class="token constant">MONDAY</span><span class="token punctuation">,</span>
  <span class="token constant">TUESDAY</span><span class="token punctuation">,</span>
  <span class="token constant">WEDNESDAY</span><span class="token punctuation">,</span>
  <span class="token constant">THURSDAY</span><span class="token punctuation">,</span>
  <span class="token constant">FRIDAY</span><span class="token punctuation">,</span>
  <span class="token constant">SATURDAY</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>7种常见的枚举类型：数字类型、字符串类型、异构类型、常量成员和计算成员、枚举成员类型和联合枚举、常量枚举、外部枚举。</p> <h3 id="数字枚举"><a href="#数字枚举" class="header-anchor">#</a> 数字枚举</h3> <p>仅指定常量命名的情况下，默认从 0 开始递增的数字集合，称之为数字枚举。</p> <p>从其他值开始递增，需要设置指定成员的初始值。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> Day <span class="token punctuation">{</span>
  <span class="token constant">SUNDAY</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 这里指定了从 1 开始递增</span>
  <span class="token constant">MONDAY</span><span class="token punctuation">,</span>
  <span class="token constant">TUESDAY</span><span class="token punctuation">,</span>
  <span class="token constant">WEDNESDAY</span><span class="token punctuation">,</span>
  <span class="token constant">THURSDAY</span><span class="token punctuation">,</span>
  <span class="token constant">FRIDAY</span><span class="token punctuation">,</span>
  <span class="token constant">SATURDAY</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="字符串枚举"><a href="#字符串枚举" class="header-anchor">#</a> 字符串枚举</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> Day <span class="token punctuation">{</span>
  <span class="token constant">SUNDAY</span> <span class="token operator">=</span> <span class="token string">'SUNDAY'</span><span class="token punctuation">,</span>
  <span class="token constant">MONDAY</span> <span class="token operator">=</span> <span class="token string">'MONDAY'</span><span class="token punctuation">,</span>
  <span class="token constant">TUESDAY</span> <span class="token operator">=</span> <span class="token string">'TUESDAY'</span><span class="token punctuation">,</span>
  <span class="token constant">WEDNESDAY</span> <span class="token operator">=</span> <span class="token string">'WEDNESDAY'</span><span class="token punctuation">,</span>
  <span class="token constant">THURSDAY</span> <span class="token operator">=</span> <span class="token string">'THURSDAY'</span><span class="token punctuation">,</span>
  <span class="token constant">FRIDAY</span> <span class="token operator">=</span> <span class="token string">'FRIDAY'</span><span class="token punctuation">,</span>
  <span class="token constant">SATURDAY</span> <span class="token operator">=</span> <span class="token string">'SATURDAY'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="异构枚举"><a href="#异构枚举" class="header-anchor">#</a> 异构枚举</h3> <p>异构枚举：TypeScript 支持枚举类型同时拥有数字和字符类型的成员</p> <p>异构枚举被认为是很鸡肋的类型。</p> <p>枚举成员可以是数字、字符串这样的常量，也可以是通过表达式计算出来的值</p> <h3 id="常量成员和计算成员"><a href="#常量成员和计算成员" class="header-anchor">#</a> 常量成员和计算成员</h3> <p>常量成员：枚举成员的值都是 字符串、数字字面量、未指定初始值从 0 递增数字常量；在转移时，通过被计算的常量枚举表达式（转译阶段可计算值的表达式）定义值的成员。</p> <p>计算成员：转译阶段之后才能计算值的表达式</p> <h3 id="枚举成员类型和联合枚举"><a href="#枚举成员类型和联合枚举" class="header-anchor">#</a> 枚举成员类型和联合枚举</h3> <p>对于不需要计算的常量类型成员，即缺省值、数字字面量、字符串字面量，被称为字面量枚举类型</p> <p>枚举成员和枚举类型之间的关系分两种情况： 如果枚举的成员同时包含字面量和非字面量枚举值，枚举成员的类型就是枚举本身（枚举类型本身也是本身的子类型）；如果枚举成员全部是字面量枚举值，则所有枚举成员既是值又是类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> Day <span class="token punctuation">{</span>
  <span class="token constant">SUNDAY</span><span class="token punctuation">,</span>
  <span class="token constant">MONDAY</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">enum</span> MyDay <span class="token punctuation">{</span>
  <span class="token constant">SUNDAY</span><span class="token punctuation">,</span>
  <span class="token constant">MONDAY</span> <span class="token operator">=</span> Day<span class="token punctuation">.</span><span class="token constant">MONDAY</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mondayIsDay<span class="token operator">:</span> Day<span class="token punctuation">.</span><span class="token constant">MONDAY</span> <span class="token operator">=</span> Day<span class="token punctuation">.</span><span class="token constant">MONDAY</span><span class="token punctuation">;</span> <span class="token comment">// ok: 字面量枚举成员既是值，也是类型</span>
<span class="token keyword">const</span> mondayIsSunday <span class="token operator">=</span> MyDay<span class="token punctuation">.</span><span class="token constant">SUNDAY</span><span class="token punctuation">;</span> <span class="token comment">// ok: 类型是 MyDay，MyDay.SUNDAY 仅仅是值</span>
<span class="token keyword">const</span> mondayIsMyDay2<span class="token operator">:</span> MyDay<span class="token punctuation">.</span><span class="token constant">MONDAY</span> <span class="token operator">=</span> MyDay<span class="token punctuation">.</span><span class="token constant">MONDAY</span><span class="token punctuation">;</span> <span class="token comment">// ts(2535)，MyDay 包含非字面量值成员，所以 MyDay.MONDAY 不能作为类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这里因为 Day 的所有成员都是字面量枚举成员，所以 Day.MONDAY 可以同时作为值和类型使用。但是 MyDay 的成员 MONDAY 是非字面量枚举成员（但是是常量枚举成员），所以 MyDay.MONDAY 仅能作为值使用.</p> <p>如果枚举仅有一个成员且是字面量成员，那么这个成员的类型等于枚举类型</p> <h3 id="常量枚举"><a href="#常量枚举" class="header-anchor">#</a> 常量枚举</h3> <p>通过添加 const 修饰符定义常量枚举，常量枚举定义转译为 JavaScript 之后会被移除，并在使用常量枚举成员的地方被替换为相应的内联值，因此常量枚举的成员都必须是常量成员（字面量 + 转译阶段可计算值的表达式）</p> <h3 id="外部枚举"><a href="#外部枚举" class="header-anchor">#</a> 外部枚举</h3> <p>通过 declare 描述一个在其他地方已经定义过的变量。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">let</span> $<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>外部枚举和常规枚举的差异在于以下几点：</p> <ul><li>在外部枚举中，如果没有指定初始值的成员都被当作计算（值）成员，这跟常规枚举恰好相反；</li> <li>即便外部枚举只包含字面量成员，这些成员的类型也不会是字面量成员类型，自然完全不具备字面量类型的各种特性。</li></ul> <p>外部枚举的作用在于为两个不同枚举（实际上是指向了同一个枚举类型）的成员进行兼容、比较、被复用提供了一种途径，这在一定程度上提升了枚举的可用性，让其显得不那么“鸡肋”。</p> <h2 id="泛型-如何正确使用泛型约束类型变量"><a href="#泛型-如何正确使用泛型约束类型变量" class="header-anchor">#</a> 泛型：如何正确使用泛型约束类型变量</h2> <h3 id="泛型是什么"><a href="#泛型是什么" class="header-anchor">#</a> 泛型是什么？</h3> <p>泛型指的是类型参数化，将原来某种具体的类型进行参数化。</p> <h3 id="泛型类型参数"><a href="#泛型类型参数" class="header-anchor">#</a> 泛型类型参数</h3> <p>泛型最常用的场景：用来约束函数参数的类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">,</span> initialValue<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="泛型类"><a href="#泛型类" class="header-anchor">#</a> 泛型类</h3> <p>在类的定义中，我们还可以使用泛型用来约束构造函数、属性、方法的类型。</p> <p>对于 React 开发者而言，组件也支持泛型。</p> <h3 id="泛型类型"><a href="#泛型类型" class="header-anchor">#</a> 泛型类型</h3> <p>在 TypeScript 中，类型本身就可以被定义为拥有不明确的类型参数的泛型，并且可以接收明确类型作为入参，从而衍生出更具体的类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> reflectFn<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">P</span> <span class="token operator">=</span> reflect<span class="token punctuation">;</span> <span class="token comment">// ok</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">GenericReflectFunction<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">P</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">IGenericReflectFunction<span class="token operator">&lt;</span><span class="token constant">P</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> reflectFn4<span class="token operator">:</span> GenericReflectFunction<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> reflect<span class="token punctuation">;</span> <span class="token comment">// 具象化泛型</span>
<span class="token keyword">const</span> reflectFn5<span class="token operator">:</span> IGenericReflectFunction<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> reflect<span class="token punctuation">;</span> <span class="token comment">// 具象化泛型</span>
<span class="token keyword">const</span> reflectFn3Return <span class="token operator">=</span> <span class="token function">reflectFn4</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 入参和返回值都必须是 string 类型</span>
<span class="token keyword">const</span> reflectFn4Return <span class="token operator">=</span> <span class="token function">reflectFn5</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  入参和返回值都必须是 number 类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在泛型定义中，可以使用一些类型操作符进行运算表达，使得泛型可以根据入参的类型衍生出各异的类型</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">StringOrNumberArray<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">E</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">?</span> <span class="token constant">E</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token constant">E</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">StringArray</span> <span class="token operator">=</span> StringOrNumberArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 类型是 string[]</span>
<span class="token keyword">type</span> <span class="token class-name">NumberArray</span> <span class="token operator">=</span> StringOrNumberArray<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 类型是 number[]</span>
<span class="token keyword">type</span> <span class="token class-name">NeverGot</span> <span class="token operator">=</span> StringOrNumberArray<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 类型是 boolean</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这里定义了一个泛型，如果入参是 number | string 就会生成一个数组类型，否则就生成入参类型。</p> <p>如果给这个泛型传入一个 string | boolean 联合类型作为入参</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">StringOrNumberArray<span class="token operator">&lt;</span><span class="token constant">E</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">E</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">?</span> <span class="token constant">E</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token constant">E</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">BooleanOrString</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">WhatIsThis</span> <span class="token operator">=</span> StringOrNumberArray<span class="token operator">&lt;</span>BooleanOrString<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 好像应该是 string | boolean ?</span>
<span class="token keyword">type</span> <span class="token class-name">BooleanOrStringGot</span> <span class="token operator">=</span> BooleanOrString <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">?</span> BooleanOrString<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> BooleanOrString<span class="token punctuation">;</span> <span class="token comment">//  string | boolean</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>WhatIsThis 并非想象中的 boolean | string, 而是 boolean | string[]。</p> <p>涉及到的原因是 分配条件类型。</p> <p>分配条件类型：在条件类型判断的情况下，如果入参是联合类型，则会被拆解成一个个独立的类型进行类型运算。</p> <p>上边示例中的 string | boolean 入参，先被拆解成 string 和 boolean 这两个独立类型，再分别判断是否是 string | number 类型的子集。因为 string 是子集而 boolean 不是，所以最终我们得到的 WhatIsThis 的类型是 boolean | string[]。</p> <blockquote><p>注意：枚举类型不支持泛型。</p></blockquote> <h3 id="泛型约束"><a href="#泛型约束" class="header-anchor">#</a> 泛型约束</h3> <p>把泛型入参限定在一个相对更明确的集合内，以便对入参进行约束。</p> <p>把接受参数的类型限定在几种原始类型的集合中，就可以使用 &quot;泛型入参名 extends 类型&quot;。</p> <p>把接口泛型入参约束在特定范围内，&quot;泛型入参名 extends <code>{ id: number; name: string }</code>&quot;。<br>
此时泛型仅接受 <code>{ id: number; name: string }</code> 接口类型的子类型作为入参。</p> <p>在多个不同的泛型入参之间设置约束关系。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ObjSetter</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span><span class="token constant">O</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">O</span><span class="token punctuation">,</span> <span class="token constant">V</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">O</span></span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">O</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> setValueOfObj<span class="token operator">:</span> <span class="token function-variable function">ObjSetter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setValueOfObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'name'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
<span class="token function">setValueOfObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'name'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'new name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
<span class="token function">setValueOfObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'name'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ts(2345)</span>
<span class="token function">setValueOfObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'name'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ts(2345)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>泛型入参的约束与默认值还可以组合使用</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ReduxModelMixed<span class="token operator">&lt;</span>State <span class="token keyword">extends</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> State
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/maxlxq/maxlxq.github.io/edit/master/docs/more/TypeScript入门.md" target="_blank" rel="noopener noreferrer">本文源码地址</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/more/ECMAScript.html" class="prev">
        ECMAScript
      </a></span> <span class="next"><a href="/more/TypeScript进阶.html">
        TypeScript进阶
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.c54d73b3.js" defer></script><script src="/assets/js/2.6cdc8135.js" defer></script><script src="/assets/js/110.9a0a6e5b.js" defer></script><script src="/assets/js/4.a41c0c79.js" defer></script>
  </body>
</html>
