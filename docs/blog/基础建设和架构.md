# 基础建设和架构

> 拉勾教育：前端基础建设与架构

## 前端工程化管理工具

- 项目依赖出现问题时，删除大法好，即删除 node_modules 和 lockfile，再重新 install，这样操作是否存在风险？
- 把所有依赖都安装到 dependencies 中，不区分 devDependencies 会有问题吗？
- 我们的应用依赖了公共库 A 和公共库 B，同时公共库 A 也依赖了公共库 B，那么公共库 B 会被多次安装或重复打包吗？
- 一个项目中，既有人用 npm，也有人用 Yarn，这会引发什么问题？
- 我们是否应该提交 lockfile 文件到项目仓库呢？

### 01｜npm 安装机制及企业及部署私服原理

#### npm 内部机制和核心原理

- npm 安装机制

> npm install => 检查 config => 判断有无 lock 文件 => 如下分支

> 1 存在 lock 文件 => 是否和 package.json 声明版本
>
> => 一致 则进行 `检查缓存`
>
> => 不一致 则根据 package.json 和 package-lock.json 进行安装和更新 lockfile

> 2 不存在 lock 文件 => 获取包信息 => 构建依赖树 => `检查缓存`

> 检查缓存 => 无 => 下载资源包 => 检查完整性 => 添加到缓存
>
> 检查缓存 => 有 => 解压到 node_modules => 生产 lock 文件

- npm 缓存机制

#### npm 不完全指南
- 自定义 npm init
- npm link，调试验证包的可用性
- npx 的作用

#### npm 多元镜像和企业及部署私服原理
> 我们可以通过 npm config set 命令来设置安装源或者某个 scope 对应的安装源，很多企业也会搭建自己的 npm 源.

```json
{
  "scripts": {
    "preinstall": "node ./bin/preinstall.js"
  }
}
```

```javascript
// preinstall.js
require(' child_process').exec('npm config get registry', function(error, stdout, stderr) {
  if (!stdout.toString().match(/registry\.x\.com/)) {
    exec('npm config set @xscope:registry https://xxx.com/npm/')
  }
})
```

现在社区上主要有 3 种工具来搭建 npm 私服：`nexus`、`verdaccio` 以及 `cnpm`。

## 现代化前端开发和架构生态

## 核心框架原理与代码设计模式

## 前端架构设计实战

## 前端全链路 —-— Node.js 全栈开发
